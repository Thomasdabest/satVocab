<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Rapid Quiz | Fun 2 Learn SAT Vocab</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Fraunces:opsz,wght@9..144,600;9..144,700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #f6f7fb;
        --ink: #101828;
        --muted: #677085;
        --primary: #4c4cf3;
        --soft: #eef0ff;
        --card: #ffffff;
        --shadow: 0 24px 60px rgba(16, 24, 40, 0.08);
        --radius: 22px;
        --border: #e6e9f2;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Space Grotesk", system-ui, sans-serif;
        color: var(--ink);
        background: radial-gradient(circle at top, #eef1ff 0%, #f6f7fb 45%, #fefeff 100%);
      }

      a {
        text-decoration: none;
        color: inherit;
      }

      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 24px 72px;
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
        font-weight: 700;
        letter-spacing: -0.02em;
      }

      .brand .logo {
        width: 36px;
        height: 36px;
        border-radius: 12px;
        background: linear-gradient(135deg, #5b5bff, #3a32d8);
        color: white;
        display: grid;
        place-items: center;
        font-weight: 700;
        box-shadow: 0 10px 20px rgba(76, 76, 243, 0.35);
      }

      .nav-actions {
        display: flex;
        align-items: center;
        gap: 12px;
        font-weight: 600;
        color: #6b7280;
      }

      .nav-actions .pill {
        padding: 10px 18px;
        border-radius: 999px;
        background: var(--primary);
        color: white;
        font-weight: 600;
        box-shadow: 0 12px 25px rgba(76, 76, 243, 0.35);
      }

      main {
        padding: 24px 72px 80px;
      }

      .hero {
        display: grid;
        grid-template-columns: minmax(220px, 1fr) 2fr;
        gap: 26px;
        align-items: start;
        margin-bottom: 26px;
      }

      .title {
        font-family: "Fraunces", "Space Grotesk", serif;
        font-size: 2.4rem;
        margin: 0;
        line-height: 1.05;
      }

      .subtitle {
        margin: 10px 0 0;
        color: var(--muted);
      }

      .game-card {
        background: var(--card);
        border-radius: var(--radius);
        border: 1px solid var(--border);
        box-shadow: var(--shadow);
        padding: 24px;
        display: grid;
        gap: 20px;
      }

      .game-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        align-items: center;
        color: var(--muted);
        font-size: 0.95rem;
      }

      .game-meta span {
        background: var(--soft);
        color: var(--primary);
        padding: 6px 12px;
        border-radius: 999px;
        font-weight: 600;
      }

      .layout {
        display: grid;
        grid-template-columns: minmax(260px, 360px) 1fr;
        gap: 24px;
        align-items: start;
      }

      .quiz-panel {
        display: grid;
        gap: 14px;
      }

      .question {
        font-size: 1.1rem;
        color: var(--ink);
        margin: 0 0 10px;
        line-height: 1.4;
      }

      .answer-row {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
      }

      .answer-row input {
        flex: 1 1 200px;
        padding: 12px 16px;
        border-radius: 999px;
        border: 1px solid var(--border);
        font-family: "Space Grotesk", system-ui, sans-serif;
        font-weight: 600;
      }

      .quiz-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        font-weight: 600;
        color: var(--primary);
      }

      .controls {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      .btn {
        border: none;
        border-radius: 999px;
        padding: 10px 18px;
        font-weight: 600;
        cursor: pointer;
        background: var(--primary);
        color: white;
        box-shadow: 0 10px 20px rgba(76, 76, 243, 0.25);
      }

      .btn.secondary {
        background: white;
        color: var(--primary);
        border: 1px solid var(--border);
        box-shadow: none;
      }

      .status {
        color: var(--muted);
        font-size: 0.95rem;
      }

      .clue-card {
        background: white;
        border-radius: 18px;
        border: 1px solid var(--border);
        padding: 16px 18px;
      }

      .clue-card h3 {
        margin: 0 0 8px;
        font-size: 1rem;
        color: var(--primary);
      }

      .leaderboard {
        display: grid;
        gap: 12px;
      }

      .leaderboard-meta {
        margin: 0;
        color: var(--muted);
        font-size: 0.9rem;
      }

      .leaderboard-form {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .leaderboard-form input {
        flex: 1 1 160px;
        padding: 10px 14px;
        border-radius: 999px;
        border: 1px solid var(--border);
        font-family: "Space Grotesk", system-ui, sans-serif;
        font-weight: 600;
      }

      .leaderboard-status {
        color: var(--muted);
        font-size: 0.9rem;
      }

      .leaderboard-list {
        margin: 0;
        padding-left: 18px;
      }

      @media (max-width: 960px) {
        header {
          padding: 20px 24px;
        }

        main {
          padding: 20px 24px 60px;
        }

        .hero {
          grid-template-columns: 1fr;
        }

        .layout {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <a class="brand" href="index.html">
        <div class="logo">F</div>
        <span>Fun 2 Learn SAT Vocab</span>
      </a>
      <div class="nav-actions">
        <a href="dashboard.html">Dashboard</a>
        <a class="pill" href="sign-in.html">Log out</a>
      </div>
    </header>

    <main>
      <section class="hero">
        <div>
          <h1 class="title">Rapid Quiz<br />Challenge</h1>
          <p class="subtitle">
            Answer quick SAT vocab questions. Earn 10 points for a correct
            answer and lose 5 points for a wrong one.
          </p>
        </div>
        <div class="game-card">
          <div class="game-meta">
            <span>Vocabulary</span>
            <span>Rapid Fire</span>
            <span>+10 / -5 scoring</span>
          </div>
          <div class="layout">
            <div class="quiz-panel">
              <div class="clue-card">
                <h3>Question</h3>
                <p class="question" id="question-text">Loading...</p>
                <div class="answer-row">
                  <input
                    id="answer-input"
                    type="text"
                    placeholder="Type the word"
                    autocomplete="off"
                  />
                  <button class="btn" id="submit-answer-btn" type="button">
                    Submit
                  </button>
                </div>
                <div class="quiz-meta">
                  <span id="score-text">Score: 0 pts</span>
                  <span id="progress-text">Question 1 of 1</span>
                </div>
                <div class="status" id="status-text">Good luck!</div>
              </div>
              <div class="controls">
                <button class="btn secondary" id="skip-btn" type="button">
                  Skip
                </button>
                <button class="btn secondary" id="restart-btn" type="button">
                  Restart
                </button>
              </div>
            </div>
            <div class="clue-card leaderboard">
              <h3>Weekly Leaderboard</h3>
              <p class="leaderboard-meta">Resets Sundays at 11:59 PM PST.</p>
              <div class="leaderboard-form">
                <input
                  id="player-name"
                  type="text"
                  placeholder="Your name"
                  maxlength="20"
                />
                <button class="btn secondary" id="submit-score-btn" type="button">
                  Submit score
                </button>
              </div>
              <div class="leaderboard-status" id="leaderboard-status">
                Check your board to post a score.
              </div>
              <ol class="leaderboard-list" id="leaderboard-list"></ol>
            </div>
          </div>
        </div>
      </section>
    </main>

    <script>
      const WORD_BANK = [
        { word: "abate", clue: "to become less intense or widespread" },
        { word: "austere", clue: "severe or strict in manner; without decoration" },
        { word: "benign", clue: "gentle and kindly; not harmful in effect" },
        { word: "candor", clue: "the quality of being open and honest" },
        { word: "catalyst", clue: "something that causes activity or change" },
        { word: "diligent", clue: "showing care and effort in work" },
        { word: "eloquent", clue: "fluent or persuasive in speaking or writing" },
        { word: "fervent", clue: "having or displaying passionate intensity" },
        { word: "genuine", clue: "real and sincere; authentic" },
        { word: "hinder", clue: "to create difficulties for; to obstruct" },
        { word: "impartial", clue: "treating all sides equally; fair" },
        { word: "judicious", clue: "having or showing good judgment" },
        { word: "lucid", clue: "expressed clearly; easy to understand" },
        { word: "mundane", clue: "ordinary and lacking excitement" },
        { word: "nebulous", clue: "unclear, vague, or ill-defined" },
        { word: "pragmatic", clue: "dealing with things realistically and practically" },
        { word: "quell", clue: "to put an end to; to suppress" },
        { word: "resilient", clue: "able to recover quickly from difficulties" },
        { word: "scrutiny", clue: "critical observation or examination" },
        { word: "tenuous", clue: "very weak or slight; slender" },
        { word: "vigilant", clue: "keeping careful watch for possible danger" },
        { word: "wary", clue: "feeling or showing caution" },
        { word: "zenith", clue: "the highest point or peak" }
      ];

      const SCORE_CORRECT = 10;
      const SCORE_WRONG = -5;
      const LEADERBOARD_KEY = "rapidQuizLeaderboard";
      const LEADERBOARD_RESET_KEY = "rapidQuizLeaderboardResetAt";
      const TIME_ZONE = "America/Los_Angeles";

      const getTimeZoneOffset = (date, timeZone) => {
        const dtf = new Intl.DateTimeFormat("en-US", {
          timeZone,
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
          hour12: false
        });
        const parts = dtf.formatToParts(date).reduce((acc, part) => {
          if (part.type !== "literal") acc[part.type] = part.value;
          return acc;
        }, {});
        const utcFromParts = new Date(
          `${parts.year}-${parts.month}-${parts.day}T${parts.hour}:${parts.minute}:${parts.second}.000Z`
        );
        return utcFromParts.getTime() - date.getTime();
      };

      const getZonedDate = (date, timeZone) => {
        const offset = getTimeZoneOffset(date, timeZone);
        return new Date(date.getTime() + offset);
      };

      const zonedTimeToUtc = ({ year, month, day, hour, minute, second }, timeZone) => {
        const utcGuess = new Date(Date.UTC(year, month - 1, day, hour, minute, second));
        const offset = getTimeZoneOffset(utcGuess, timeZone);
        return new Date(utcGuess.getTime() - offset);
      };

      const getNextResetTimestamp = (now = new Date()) => {
        const pstNow = getZonedDate(now, TIME_ZONE);
        const day = pstNow.getUTCDay();
        const minutesNow = pstNow.getUTCHours() * 60 + pstNow.getUTCMinutes();
        const resetMinutes = 23 * 60 + 59;
        let daysUntilSunday = (7 - day) % 7;
        if (day === 0 && minutesNow >= resetMinutes) {
          daysUntilSunday = 7;
        }
        const targetDate = new Date(
          Date.UTC(
            pstNow.getUTCFullYear(),
            pstNow.getUTCMonth(),
            pstNow.getUTCDate() + daysUntilSunday,
            23,
            59,
            0
          )
        );
        return zonedTimeToUtc(
          {
            year: targetDate.getUTCFullYear(),
            month: targetDate.getUTCMonth() + 1,
            day: targetDate.getUTCDate(),
            hour: 23,
            minute: 59,
            second: 0
          },
          TIME_ZONE
        ).getTime();
      };

      const ensureWeeklyReset = () => {
        const now = new Date();
        const storedReset = Number(localStorage.getItem(LEADERBOARD_RESET_KEY) || 0);
        if (!storedReset || now.getTime() >= storedReset) {
          localStorage.setItem(LEADERBOARD_KEY, JSON.stringify([]));
          localStorage.setItem(
            LEADERBOARD_RESET_KEY,
            String(getNextResetTimestamp(now))
          );
        }
      };

      const loadLeaderboard = () => {
        ensureWeeklyReset();
        try {
          return JSON.parse(localStorage.getItem(LEADERBOARD_KEY) || "[]");
        } catch {
          return [];
        }
      };

      const saveLeaderboard = (entries) => {
        localStorage.setItem(LEADERBOARD_KEY, JSON.stringify(entries));
      };

      const formatResetTime = () => {
        const resetAt = Number(localStorage.getItem(LEADERBOARD_RESET_KEY) || 0);
        if (!resetAt) return "Next reset pending...";
        return new Intl.DateTimeFormat("en-US", {
          timeZone: TIME_ZONE,
          weekday: "short",
          month: "short",
          day: "numeric",
          hour: "numeric",
          minute: "2-digit"
        }).format(new Date(resetAt));
      };

      const renderLeaderboard = () => {
        const list = document.querySelector("#leaderboard-list");
        const status = document.querySelector("#leaderboard-status");
        const entries = loadLeaderboard();
        list.innerHTML = "";

        if (!entries.length) {
          const empty = document.createElement("li");
          empty.textContent = "No scores yet. Be the first!";
          list.appendChild(empty);
        } else {
          entries
            .slice()
            .sort((a, b) => b.score - a.score || a.timestamp - b.timestamp)
            .slice(0, 10)
            .forEach((entry) => {
              const li = document.createElement("li");
              li.textContent = `${entry.name} â€” ${entry.score} pts`;
              list.appendChild(li);
            });
        }

        status.textContent = `Next reset: ${formatResetTime()} PST`;
      };

      const shuffle = (items) => {
        const array = items.slice();
        for (let i = array.length - 1; i > 0; i -= 1) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      };

      const setStatus = (text) => {
        document.querySelector("#status-text").textContent = text;
      };

      const initGame = () => {
        const questionEl = document.querySelector("#question-text");
        const answerInput = document.querySelector("#answer-input");
        const scoreText = document.querySelector("#score-text");
        const progressText = document.querySelector("#progress-text");
        const submitBtn = document.querySelector("#submit-answer-btn");
        const skipBtn = document.querySelector("#skip-btn");
        const restartBtn = document.querySelector("#restart-btn");
        const status = document.querySelector("#status-text");

        let order = shuffle(WORD_BANK);
        let index = 0;
        let score = 0;
        let answered = 0;

        const updateScore = () => {
          scoreText.textContent = `Score: ${score} pts`;
          progressText.textContent = `Question ${Math.min(
            index + 1,
            order.length
          )} of ${order.length}`;
        };

        const showQuestion = () => {
          if (index >= order.length) {
            questionEl.textContent = "Quiz complete! Submit your score.";
            answerInput.value = "";
            answerInput.disabled = true;
            submitBtn.disabled = true;
            skipBtn.disabled = true;
            status.textContent = `Final score: ${score} pts.`;
            updateScore();
            return;
          }
          const entry = order[index];
          questionEl.textContent = entry.clue;
          answerInput.value = "";
          answerInput.disabled = false;
          submitBtn.disabled = false;
          skipBtn.disabled = false;
          status.textContent = "Type the word that matches the clue.";
          answerInput.focus();
          updateScore();
        };

        const checkAnswer = () => {
          const entry = order[index];
          const value = answerInput.value.trim().toLowerCase();
          if (!value) {
            status.textContent = "Type an answer before submitting.";
            return;
          }
          answered += 1;
          if (value === entry.word.toLowerCase()) {
            score += SCORE_CORRECT;
            status.textContent = `Correct! +${SCORE_CORRECT} points.`;
          } else {
            score += SCORE_WRONG;
            status.textContent = `Wrong. The answer was "${entry.word}". ${SCORE_WRONG} points.`;
          }
          index += 1;
          showQuestion();
        };

        submitBtn.addEventListener("click", checkAnswer);
        answerInput.addEventListener("keydown", (event) => {
          if (event.key === "Enter") {
            event.preventDefault();
            checkAnswer();
          }
        });

        skipBtn.addEventListener("click", () => {
          index += 1;
          status.textContent = "Skipped.";
          showQuestion();
        });

        restartBtn.addEventListener("click", () => {
          order = shuffle(WORD_BANK);
          index = 0;
          score = 0;
          answered = 0;
          showQuestion();
        });

        document.querySelector("#submit-score-btn").addEventListener("click", () => {
          const statusEl = document.querySelector("#leaderboard-status");
          if (answered === 0) {
            statusEl.textContent = "Answer at least one question first.";
            return;
          }
          ensureWeeklyReset();
          const nameInput = document.querySelector("#player-name");
          const name = nameInput.value.trim() || "Player";
          const entries = loadLeaderboard();
          entries.push({
            name: name.slice(0, 20),
            score,
            timestamp: Date.now()
          });
          saveLeaderboard(entries);
          renderLeaderboard();
          statusEl.textContent = "Score submitted!";
        });

        renderLeaderboard();
        showQuestion();
      };

      initGame();
    </script>
  </body>
</html>
